{
  "version": 2,
  "functions": {
    "api/**/*.js": { "memory": 512, "maxDuration": 10 }
  },
  "rewrites": [
    { "source": "/api/payment-document", "destination": "/api/registration/action" },
    
    { "source": "/api/admin-api/registrations/:id", "destination": "/api/saggita?_module=registrations&id=:id" },
    { "source": "/api/admin-api/registrations", "destination": "/api/saggita?_module=registrations" },
    { "source": "/api/admin-api/history", "destination": "/api/saggita?_module=registrations&_route=history" },

    { "source": "/api/admin-api/students/:id/payments/:pid", "destination": "/api/saggita?_module=students&id=:id&_route=payments&pid=:pid" },
    { "source": "/api/admin-api/students/:id/payments", "destination": "/api/saggita?_module=students&id=:id&_route=payments" },
    { "source": "/api/admin-api/students/:id/attendance/:aid", "destination": "/api/saggita?_module=students&id=:id&_route=attendance&aid=:aid" },
    { "source": "/api/admin-api/students/:id/attendance", "destination": "/api/saggita?_module=students&id=:id&_route=attendance" },
    { "source": "/api/admin-api/students/:id/groups", "destination": "/api/saggita?_module=students&id=:id&_route=groups" },
    { "source": "/api/admin-api/students/:id/reg-payment", "destination": "/api/saggita?_module=students&id=:id&_route=reg-payment" },
    { "source": "/api/admin-api/students/:id", "destination": "/api/saggita?_module=students&id=:id" },
    { "source": "/api/admin-api/students", "destination": "/api/saggita?_module=students" },

    { "source": "/api/instructor/login", "destination": "/api/saggita?_module=instructor-auth" },
    { "source": "/api/instructor/me", "destination": "/api/saggita?_module=instructor-auth&_route=me" },
    { "source": "/api/instructor/groups/:id/students", "destination": "/api/saggita?_module=instructor-panel&_route=students&id=:id" },
    { "source": "/api/instructor/groups/:id/stats", "destination": "/api/saggita?_module=instructor-panel&_route=stats&id=:id" },
    { "source": "/api/instructor/groups", "destination": "/api/saggita?_module=instructor-panel&_route=groups" },
    { "source": "/api/instructor/payments", "destination": "/api/saggita?_module=instructor-panel&_route=payments" },
    { "source": "/api/instructor/sessions/:id/attendance", "destination": "/api/saggita?_module=instructor-attendance&_route=attendance&id=:id" },
    { "source": "/api/instructor/sessions", "destination": "/api/saggita?_module=instructor-attendance&_route=sessions" }
  ]
}