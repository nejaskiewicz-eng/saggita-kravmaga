<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Panel Instruktora</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="font-family: Arial; padding:40px;">

<h2>Panel Instruktora</h2>

<input id="code" placeholder="Kod dostępu" />
<button onclick="login()">Zaloguj</button>

<p id="error" style="color:red;"></p>

<div id="sessions"></div>

<script>
async function login() {
  const code = document.getElementById('code').value.trim()
  const error = document.getElementById('error')
  const sessionsDiv = document.getElementById('sessions')
  error.innerText = ''
  sessionsDiv.innerHTML = ''

  const res = await fetch('/api/instructor/panel?code=' + encodeURIComponent(code))
  const json = await res.json()
  const rows = json && json.rows ? json.rows : []

  if (!rows.length) {
    error.innerText = 'Nieprawidłowy kod'
    return
  }

  rows.forEach(s => {
    const div = document.createElement('div')
    div.style.padding = '12px 0'
    div.style.borderBottom = '1px solid #ddd'
    div.innerHTML = `
      <div><strong>${String(s.session_date).slice(0,10)}</strong> — ${s.group_name} (${s.location})</div>
      <div>
        <a href="/instruktor-zajecia.html?code=${encodeURIComponent(code)}&session_id=${s.session_id}">
          Wejdź
        </a>
      </div>
    `
    sessionsDiv.appendChild(div)
  })
}
</script>

</body>
</html>